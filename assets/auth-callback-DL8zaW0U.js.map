{"version":3,"file":"auth-callback-DL8zaW0U.js","sources":["../../auth-callback.html?html-proxy&index=1.js"],"sourcesContent":["\n    import { parseOAuthCallback } from './core/auth.js';\n    \n    const params = parseOAuthCallback();\n    \n    if (params.error) {\n      // Send error back to opener\n      if (window.opener) {\n        window.opener.postMessage({\n          type: 'oauth-error',\n          error: params.error,\n          errorDescription: params.errorDescription\n        }, window.location.origin);\n      }\n      document.querySelector('.message').innerHTML = `\n        <h1>Authentication Failed</h1>\n        <p>${params.errorDescription || params.error}</p>\n        <p>You can close this window.</p>\n      `;\n    } else if (params.accessToken || params.code) {\n      // Send tokens back to opener\n      if (window.opener) {\n        window.opener.postMessage({\n          type: 'oauth-success',\n          accessToken: params.accessToken,\n          code: params.code,\n          state: params.state\n        }, window.location.origin);\n        \n        // Don't close immediately - wait for parent to process\n        document.querySelector('.message').innerHTML = `\n          <h1>Success!</h1>\n          <p>Authentication complete. This window will close automatically...</p>\n        `;\n        \n        // Close after a short delay to ensure message is processed\n        setTimeout(() => {\n          window.close();\n        }, 1000);\n      } else {\n        // Fallback: store in localStorage and redirect\n        sessionStorage.setItem('oauth_callback', JSON.stringify(params));\n        window.location.href = '/';\n      }\n    } else {\n      document.querySelector('.message').innerHTML = `\n        <h1>No Authentication Data</h1>\n        <p>You can close this window.</p>\n      `;\n    }\n  "],"names":["params","parseOAuthCallback"],"mappings":"uCAGI,MAAMA,EAASC,EAAkB,EAE7BD,EAAO,OAEL,OAAO,QACT,OAAO,OAAO,YAAY,CACxB,KAAM,cACN,MAAOA,EAAO,MACd,iBAAkBA,EAAO,gBACnC,EAAW,OAAO,SAAS,MAAM,EAE3B,SAAS,cAAc,UAAU,EAAE,UAAY;AAAA;AAAA,aAExCA,EAAO,kBAAoBA,EAAO,KAAK;AAAA;AAAA,SAGrCA,EAAO,aAAeA,EAAO,KAElC,OAAO,QACT,OAAO,OAAO,YAAY,CACxB,KAAM,gBACN,YAAaA,EAAO,YACpB,KAAMA,EAAO,KACb,MAAOA,EAAO,KACxB,EAAW,OAAO,SAAS,MAAM,EAGzB,SAAS,cAAc,UAAU,EAAE,UAAY;AAAA;AAAA;AAAA,UAM/C,WAAW,IAAM,CACf,OAAO,MAAK,CACd,EAAG,GAAI,IAGP,eAAe,QAAQ,iBAAkB,KAAK,UAAUA,CAAM,CAAC,EAC/D,OAAO,SAAS,KAAO,KAGzB,SAAS,cAAc,UAAU,EAAE,UAAY;AAAA;AAAA;"}