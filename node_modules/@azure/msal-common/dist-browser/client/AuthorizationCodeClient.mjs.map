{"version":3,"file":"AuthorizationCodeClient.mjs","sources":["../../src/client/AuthorizationCodeClient.ts"],"sourcesContent":[null],"names":["ClientAuthErrorCodes.requestCannotBeMade","PerformanceEvents.UpdateTokenEndpointAuthority","TimeUtils.nowSeconds","PerformanceEvents.AuthClientExecuteTokenRequest","Constants.HeaderNames","PerformanceEvents.HandleServerTokenResponse","ClientConfigurationErrorCodes.logoutRequestEmpty","PerformanceEvents.AuthClientCreateTokenRequestBody","Constants.CLIENT_INFO_SEPARATOR","PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint","RequestParameterBuilder.addClientId","AADServerParamKeys.CLIENT_ID","ClientConfigurationErrorCodes.redirectUriEmpty","RequestParameterBuilder.addRedirectUri","RequestParameterBuilder.addScopes","RequestParameterBuilder.addAuthorizationCode","RequestParameterBuilder.addLibraryInfo","RequestParameterBuilder.addApplicationTelemetry","RequestParameterBuilder.addThrottling","RequestParameterBuilder.addServerTelemetry","RequestParameterBuilder.addCodeVerifier","RequestParameterBuilder.addClientSecret","RequestParameterBuilder.addClientAssertion","RequestParameterBuilder.addClientAssertionType","RequestParameterBuilder.addGrantType","Constants.GrantType","RequestParameterBuilder.addClientInfo","Constants.AuthenticationScheme","PerformanceEvents.PopTokenGenerateCnf","RequestParameterBuilder.addPopToken","RequestParameterBuilder.addSshJwk","ClientConfigurationErrorCodes.missingSshJwk","RequestParameterBuilder.addClaims","RequestParameterBuilder.addCcsOid","RequestParameterBuilder.addCcsUpn","RequestParameterBuilder.addBrokerParameters","RequestParameterBuilder.addExtraParameters","AADServerParamKeys.RETURN_SPA_CODE","RequestParameterBuilder.instrumentBrokerParams","UrlUtils.mapToQueryString","RequestParameterBuilder.addPostLogoutRedirectUri","RequestParameterBuilder.addCorrelationId","RequestParameterBuilder.addIdTokenHint","RequestParameterBuilder.addState","RequestParameterBuilder.addLogoutHint","RequestParameterBuilder.addInstanceAware"],"mappings":"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"}